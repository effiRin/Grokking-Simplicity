<br>
<br>

# Chapter 1. Welcome to 함수형 코딩

함수형 프로그래밍은 범용 프로그래밍 패러다임이므로 어디서든 잘 쓸 수 있다.

<br>
 
## 함수형 프로그래밍

1. 수학 함수를 사용하고 부수 효과(side effect)를 피하는 것이 특징인 프로그래밍 패러다임
2. 부수 효과 없이 순수 함수(pure function)만 사용하는 프로그래밍 스타일

- 부수 효과 - 함수가 리턴값 이외에 하는 모든 일을 말합니다.
예) 메일 보내기, 전역 상태 수정하기

- 부수 효과는 함수를 부를 때마다 발생하기 때문에 문제가 될 수 있다.
어떤 경우에는 리턴값이 필요해서 불렀지만 의도하지 않게 부수 효과가 발생할 수 있다.
- 대부분 함수형 프로그래머는 불필요한 부수 효과를 가능한 사용하지 않으려고 한다.
    - 부수 효과에는 다음과 같은 것이 있다.
        - 이메일 보내기
        - 파일 읽기
        - 불빛을 깜빡이기
        - 웹 요청을 하기
        - 자동차에 브레이크 밟기
    - 순수 함수 - 인자에만 의존하고 부수 효과가 없는 함수이다.
        - 인자에만 의존한다는 말은 같은 인자를 넣으면 항상 같은 결과를 돌려준다는 말이다.
        - 수학에서 함수도 그렇게 동작하기 때문에 우리는 순수 함수를 수학 함수라고 볼 수 있다.
        - 순수 함수는 다루기 쉽고 이해하기 쉽기 때문에 함수형 프로그래머들이 중요하게 생각한다.

- 함수형 프로그래머는 항상 부수 효과를 피하고 순수 함수만 사용해야 할 것 같지만, 실제 함수형 프로그래머는 부수 효과와 순수하지 않는 함수를 사용합니다.

<br>
<br>

## 실용적인 측면에서 함수형 프로그래밍 정의의 문제점

- 앞서 살펴본 함수형 프로그래밍의 정의는 학문적으로 가치가 있을지 모르지만 실제 프로그래밍 하는 개발자에게 큰 도움이 되지 않는다.

- 문제 1 : 부수 효과는 필요하다.
    - 부수 효과란 함수에서 결괏값을 주는 것 외에 하는 행동을 말한다.
    - 순수 함수란 부수 효과 없이 결과값이 인자에만 의존하는 함수를 말한다.

- 정의에 따르면 함수형 프로그래밍은 부수 효과를 피해야 하지만, 부수 효과는 소프트웨어를 실행하는 이유입니다.
    
    이메일을 전송하지 않는 이메일 전송 소프트웨어가 무슨 의미가 있겠습니까?
    
    정의에는 부수 효과를 완전히 쓰지 말라는 것처럼 되어있지만 필요할 때는 써야합니다.
    
- 함수형 프로그래밍은 부수 효과를 잘 다룰 수 있습니다.
    - 함수형 프로그래머는 부수 효과가 실제로 필요하지만 문제가 될 수 있다는 것을 알기 때문에 부수 효과를 잘 다루기 위한 도구를 많이 알고 있다.

- 함수형 프로그래밍은 실용적이다.
    - 정의에서는 함수형 프로그래밍이 수학적이라 실제 소프트웨어 개발에서 사용하지 않는 것처럼 느껴지지만 실제로 함수형 프로그래밍으로 잘 만들어진 소프트웨어가 많다.

- 함수형 프로그래밍을 학문적 지식이 아닌 기술과 개념으로 보기

<br>
<br>

## 액션과 계산, 데이터 구분하기

- **액션(action) / 계산(calculation) / 데이터(data)**

![image](https://user-images.githubusercontent.com/101503543/229329816-464b8494-f85b-4a2c-9ffa-929e570856fc.png)


![image](https://user-images.githubusercontent.com/101503543/229329830-4fa6a0c9-30ea-4333-b8ae-690a7a686394.png)


<br>
<br>

- 함수형 프로그래머는 부를 때 조심해야 하는 코드를 구분합니다.
    - **액션은 호출하는 시점과 횟수에 의존한다.** 그래서 호출할 때 조심해야 한다.
    - 반면 sum과 같은 **계산 함수는 호출하는 시점이나 횟수가 중요하지 않다.** 언제 호출해도 항상 같은 값을 주며, 나머지 코드나 소프트웨어 외부에 영향을 주지 않기 때문에 여러 번 호출해도 상관없다.
    - **계산**과 **데이터**의 차이는 **실행 여부**이다. 계산은 실행 가능하나 데이터는 그렇지 않고 정적이다.

- 일반적으로 액션보다는 계산이 쓰기 쉽고
계산 보다는 데이터가 쓰기 쉽다.
결과적으로 가장 쓰기 좋은 것은 ‘데이터’다.
    
    **⇒ 함수형 프로그래머는 액션보다 계산을 좋아하고, 계산보다 데이터를 좋아한다.**
    
<br>
<br>

### **시나리오로 액션 / 계산 / 데이터 구분하기**

- **1단계 : 사용자가 작업 완료 표시를 함**  
이것은 UI 이벤트인데 실행 횟수에 의존하기 때문에 액션임.

<br>

- **2단계 : 클라이언트가 서버로 메시지를 보냄**  
메시지를 보내는 것도 액션이다.   
메시지 자체는 나중에 서버에서 해석해야 하는 값이기 때문에 데이터이다.

<br>

- **3단계 : 서버가 메시지를 받음**  
메시지를 받는 것은 횟수에 의존하므로 액션입니다.

<br>

- **4단계 : 서버가 데이터베이스를 변경**  
내부 상태를 바꾸는 것은 액션입니다.

<br>

- **5단계 : 서버가 누구에게 알림을 보낼지 결정**  
결정하는 것은 계산입니다.  
입력값이 같다면 서버는 항상 같은 결정을 내리기 때문

<br>

- **6단계 : 서버가 이메일로 알림을 보냄**

이메일 보내기는 액션입니다.   
같은 메일을 한 번 보내는 것과 두 번 보내는 것은 다릅니다.

<br>
<br>

### 각 분류가 가지고 있는 특징

1. **액션**
    1. 실행 시점이나 횟수, 또는 둘 다 의존함
    <br>
    예) 이메일 보내기  
    <br>
    - **프로그래밍 도구**
        - 시간이 지남에 따라 안전하게 상태를 바꿀 수 있는 방법
        - 순서를 보장하는 방법
        - 액션이 정확히 한 번만 실행되게 보장하는 방법

<br>

2. **계산**
    1. 입력값으로 출력값을 만드는 것
    2. 같은 입력값이면 항상 같은 결과값이 나옴
    3. 실행 시점, 횟수에 의존하지 않으며,
    4. 외부에 영향을 주지 않는다.
    - 프로그래밍 도구
        - 정확성을 위한 정적 분석
        - 소프트웨어에서 쓸 수 있는 수학적 지식
        - 테스트 전략

<br>        

3. **데이터**
    1. 이벤트에 대해 기록한 사실
    2. 여러 형태로 해석할 수 있다.
    - 프로그래밍 도구
        - 효율적으로 접근하기 위해 데이터를 구성하는 방법
        - 데이터를 보관하기 위한 기술
        - 데이터를 이용해 중요한 것을 발견하는 원칙

<br>
<br>


### 액션, 계산, 데이터를 구분하는 것의 장점?

- 함수형 프로그래밍은 단순한 트렌드가 아니다. 오랫동안 쌓아온 수학 지식을 기반으로 하는 가장 오래된 프로그래밍 패러다임이다.

- 여러 컴퓨터가 네트워크를 통해 통신하기 시작하면 소프트웨어가 복잡해진다.
    - 시간에 따라 바뀌는 값을 모델링할 때 동작 방법을 이해하는 것은 중요하지만 쉽지 않다.
    - **실행 시점이나 횟수에 의존하는 코드를 없애면, 코드를 더 쉽게 이해할 수 있고 심각한 버그를 막을 수 있다.**

- **데이터와 계산은 실행 시점이나 횟수에 의존하지 않는다.**
    
    ⇒ **그래서 코드는 데이터와 계산으로 바꿀수록 분산 시스템에서 생기는 여러 가지 문제를 해결할 수 있다.**


<br>
<br>
<br>

# 함수형 사고란?

- 함수형 프로그래머가 소프트웨어 문제를 해결하기 위해 사용하는 기술과 생각을 말한다.

- **함수형 프로그래밍에서 가장 중요한 개념 2가지**
    1. 액션 / 계산 / 데이터 구분해서 생각하기
    2. 일급 추상(first-class abstraction) 개념

- 이 책은 기존 함수형 프로그래밍을 새롭게 접근하기 위해 ‘함수형 사고’라는 말을 새로 만들었다고 함.

- 자바스크립트는 완벽한 함수형 프로그래밍 언어가 아니다. 하지만 부족한 점이 있기 때문에 함수형 프로그래밍을 할 때 어떤 것이 필요한지 알 수 있는 계기가 된다.

<br>
<br>

## 요점 정리

- 이 책은 두 파트로 나뉘어져있다.
    - ‘액션 / 계산 / 데이터’ 구분하기
    - 일급 추상 사용하기

- 액션은 시간에 의존한다. → 액션에서 시간에 의존하는 부분을 분리하면 좀 더 다루기 쉽다.
- 계산은 시간에 의존하지 않는다. 다루기 쉽기 때문에 가능한 코드를 계산으로 바꾸는 것이 좋다.
- 데이터는 정적이고 해석이 필요하다. 데이터는 저장하거나 이해하기 쉽고 전송하기 편리하다.